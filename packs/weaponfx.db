{"_id":"RPjF4SvsMP3dolyX","name":"AMR","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/supersonic-bullet.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.e2KnuysIXP5IhXFy"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/AMR_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.Snipe.blue\")\r\n        .filter(\"ColorMatrix\", {hue: 200})\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/AMR_Impact.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.orange.0\")\r\n        .atLocation(target)\r\n        .rotateTowards(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotate(230)\r\n        .center()\r\n        .waitUntilFinished();\r\n}\r\nsequence.play();\r\n"}
{"_id":"XYVkQ3LALbGc6B7i","name":"Annihilator","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Cantrip/Eldritch_Blast/EldritchBlast_01_Regular_Purple_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator_Charge.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.eldritch_blast.purple\")\r\n        .startTime(900)\r\n        .scale(.86)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .waitUntilFinished(-4000);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.3\")\r\n        .scale(1.0)\r\n        .tint(\"#c91af9\")\r\n        .atLocation(target)\r\n        .waitUntilFinished(-400);\r\n}\r\nsequence.play();\r\n"}
{"_id":"Ui60K7EYoOV23KNM","name":"Apocalypse Rail","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/target-laser.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.0UJ0PEMqT9XGrAdq"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/APR2_Load.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .waitUntilFinished()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/APR2_Fire.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.bullet.01.orange\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .stretchTo(target)\r\n    .scale(2.0)\r\n    .waitUntilFinished(-300)\r\n    .effect()\r\n    .file(\"jb2a.fireball.explosion.orange\")\r\n    .atLocation(target)\r\n    .zIndex(1)\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/APR2_Impact.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .play();\r\n"}
{"_id":"jIkBKLXsaxYq0GDS","name":"Apply Smoke Grenade","type":"script","author":"V1p3l3q12ZqIraMP","img":"icons/svg/acid.svg","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.DQjpFvFEGSrSzSYq"}},"command":"let params =\r\n    [{\r\n        filterType: \"field\",\r\n        filterId: \"mySmokeField\",\r\n        shieldType: 3,\r\n        gridPadding: 2.4,\r\n        color: 0xA9A9A9,\r\n        time: 0,\r\n        blend: 0,\r\n        intensity: 0.4,\r\n        lightAlpha: 0.9,\r\n        lightSize: 0.5,\r\n        scale: 1,\r\n        radius: 1,\r\n        chromatic: false,\r\n        zOrder: 512,\r\n        animated:\r\n            {\r\n                time:\r\n                    {\r\n                        active: true,\r\n                        speed: 0.0015,\r\n                        animType: \"move\",\r\n                    },\r\n            },\r\n    }];\r\n\r\nTokenMagic.addUpdateFiltersOnSelected(params);\r\n"}
{"name":"ArcBow","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/lightning-bow.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.MYvW9vDvnlzPxRLQ"}},"_id":"SvEgMaioDs6CiqaK","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/ArcBowFire.ogg\")\r\n        .delay(800)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/veil_rifle.ogg\")\r\n        .delay(1200)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.arrow.physical.blue\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target);\r\n    sequence.effect()\r\n        .file(\"jb2a.lightning_bolt.narrow.blue\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .delay(800);\r\n\r\n}\r\nsequence.play();\r\n"}
{"_id":"R006179gUEan7xqn","name":"Assault Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/ak47.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/AR_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.01.orange\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target, {randomOffset: 0.4})\r\n        .repeats(4, 100)\r\n        .waitUntilFinished();\r\n}\r\n\r\nsequence.play();\r\n"}
{"_id":"JMFCQVUjBc3QLBpS","name":"AutoPod","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/trefoil-shuriken.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/AutoPod_Fire.ogg\")\r\n    .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.template_circle.vortex.loop.blue\")\r\n    .endTime(4700)\r\n    .scale(0.20)\r\n    .tint(\"#787878\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .moveTowards(target)\r\n    .waitUntilFinished()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/Autopod_Impact.ogg\")\r\n    .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.impact.yellow.1\")\r\n    .scale(.6)\r\n    .atLocation(target)\r\n\r\n    .play();\r\n"}
{"name":"Bolt Thrower","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/fast-arrow.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.LKpNttxpMKGWKQGk"}},"_id":"6lzGhwqHNYxXY25N","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/shotgun_fire.ogg\")\r\n        .delay(200)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.bolt.physical.orange\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .startTime(500)\r\n        .stretchTo(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Impact.ogg\")\r\n        .delay(700)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.explosion.01.orange\")\r\n        .atLocation(target)\r\n        .delay(700)\r\n        .waitUntilFinished();\r\n}\r\nsequence.play();\r\n"}
{"_id":"qfPYlbW1NHKOEJXF","name":"Brood Siblings Molt","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/shining-claw.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.sword.melee.01.white\")\r\n        .tint(\"#080303\")\r\n        .scale(0.8)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladeswing.ogg\")\r\n        .delay(900)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladehit.ogg\")\r\n        .delay(1000)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue\")\r\n        .scale(1.2)\r\n        .atLocation(target)\r\n        .delay(1000)\r\n        .waitUntilFinished(-1500);\r\n}\r\nsequence.play();\r\n"}
{"name":"Burst Launcher","type":"script","author":"o4uIv78Hm1yumC2C","img":"modules/lancer-weapon-fx/icons/airburst.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"o4uIv78Hm1yumC2C":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"_id":"EHls7n7amW2fEZ97","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/AutoPod_Fire.ogg\")\r\n    .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.lightning_ball.blue\")\r\n    .endTime(1500)\r\n    .scale(0.2)\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .moveTowards(target)\r\n    .waitUntilFinished()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/AirBurst.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.explosion.02.blue\")\r\n    .scale(0.5)\r\n    .atLocation(target)\r\n    .waitUntilFinished()\r\n    .play();\r\n"}
{"_id":"kozGi0iZPK18rFlI","name":"Charged Blade","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/shining-sword.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.lasersword.melee.blue\")\r\n        .scale(1.1)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Axe_swing.ogg\")\r\n        .delay(900)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Melee.ogg\")\r\n        .delay(1200)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.3\")\r\n        .scale(1.2)\r\n        .atLocation(target)\r\n        .delay(1200)\r\n        .waitUntilFinished(-900);\r\n}\r\nsequence.play();\r\n"}
{"name":"Combat Drill","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/drill.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.XbZb6J0ytnpJ0m7t"}},"_id":"Tyi49hWX1axZsrq2","command":"let target = Array.from(game.user.targets)[0];\r\nlet sequence = new Sequence();\r\n\r\nlet gridsize = canvas.grid.grid.options.dimensions.size;\r\nlet gridscale = gridsize / 100;\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"modules/lancer-weapon-fx/sprites/DRILL.png\")\r\n        .scale(0.6)\r\n\r\n        .filter(\"Glow\", {color: 0xd7d23c})\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .spriteOffset({x: -10 * gridscale, y: 10 * gridscale})\r\n        .moveTowards(target)\r\n        .moveSpeed(100)\r\n        .rotate(140);\r\n\r\n    sequence.effect()\r\n        .file(\"jb2a.gust_of_wind.veryfast\")\r\n        .scale(0.2)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target)\r\n        .zIndex(2)\r\n        .delay(50);\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Autopod_Impact.ogg\")\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(8, 125)\r\n        .delay(200);\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.yellow\")\r\n        .scale(.4)\r\n        .delay(200)\r\n        .zIndex(1)\r\n        .atLocation(target, {randomOffset: 0.4})\r\n        .repeats(8, 125)\r\n        .waitUntilFinished();\r\n}\r\nsequence.play();\r\n"}
{"_id":"1me7RVE8gdTnu9lk","name":"Cyclone Pulse Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile/MagicMissile_01_Regular_Purple_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.8CSStDFwPkXZUdDy"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/CPR_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(5, 125);\r\n\r\n    sequence.effect()\r\n        .file(\"jb2a.magic_missile.purple\")\r\n        .filter(\"ColorMatrix\", {hue: 220})\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target, {randomOffset: 0.4})\r\n        .repeats(5, 125)\r\n        .waitUntilFinished(-1600);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/CPR_Impact.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(5, 125)\r\n        .waitUntilFinished;\r\n}\r\nsequence.play();\r\n"}
{"_id":"XVCMT31Y9x5NgCf6","name":"DD 288","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/punch-blast.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.aG9WgLPZHaEhDHnY"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet gridsize = canvas.grid.grid.options.dimensions.size;\r\nlet gridscale = gridsize / 100;\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.unarmed_strike\")\r\n        .scale(0.8)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotateTowards(target)\r\n        .spriteOffset({x: -170 * gridscale})\r\n        .repeats(6, 200);\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladeswing.ogg\")\r\n        .repeats(6, 300)\r\n        .volume(0.6 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladehit.ogg\")\r\n        .delay(300)\r\n        .repeats(5, 300)\r\n        .volume(0.8 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue\")\r\n        .scale(0.4)\r\n        .atLocation(target, {randomOffset: 1})\r\n        .repeats(4, 90)\r\n        .delay(1900)\r\n        .waitUntilFinished(-500);\r\n}\r\nsequence.play();\r\n"}
{"_id":"JRAC43fdq4sRWQl8","name":"DefaultMelee","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/mailed-fist.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\nlet scale = target.actor.system.derived.mm.Size;\r\nlet sequence = new Sequence();\r\n\r\nlet gridsize = canvas.grid.grid.options.dimensions.size;\r\nlet gridscale = gridsize / 100;\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.divine_smite.target.blueyellow\")\r\n        .scale(0.8)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotateTowards(target)\r\n        .spriteOffset({x: -160 * gridscale, y: 90 * gridscale})\r\n        .rotate(90);\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladeswing.ogg\")\r\n\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladehit.ogg\")\r\n        .delay(300)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue\")\r\n        .scale(0.4)\r\n        .atLocation(target, {randomOffset: 1})\r\n        .repeats(4, 80)\r\n        .delay(700)\r\n        .waitUntilFinished(-1500);\r\n}\r\nsequence.play();\r\n"}
{"_id":"nCYIyBz5RESLVDdt","name":"DefaultTech","type":"script","author":"AZ3wQQG0mIDlDIfD","img":"modules/lancer-weapon-fx/icons/processor.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"AZ3wQQG0mIDlDIfD":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.Dp0FTIgouxTBxtbj"}},"command":"let targets = Array.from(game.user.targets);\r\n\r\ntargets.forEach(target => {\r\n    let sequence = new Sequence()\r\n\r\n        .sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Nexus_Fire.ogg\")\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .effect()\r\n        .file(\"jb2a.energy_strands.range.multiple.purple.01.30ft\")\r\n        .scale(1.4)\r\n        .playbackRate(1.5)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .waitUntilFinished(-800)\r\n        .sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/PPC2.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .effect()\r\n        .file(\"jb2a.static_electricity.02.blue\")\r\n        .scale(0.5)\r\n        .atLocation(target)\r\n        .waitUntilFinished()\r\n        .play();\r\n});\r\n"}
{"_id":"nT1EAqOceCXvrRFi","name":"Deploy Smoke Mine","type":"script","author":"V1p3l3q12ZqIraMP","img":"icons/svg/acid.svg","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.DQjpFvFEGSrSzSYq"},"combat-utility-belt":{"macroTrigger":""}},"command":"let params =\r\n    [{\r\n        filterType: \"field\",\r\n        filterId: \"mySmokeField\",\r\n        shieldType: 3,\r\n        gridPadding: 3.2,\r\n        color: 0xA9A9A9,\r\n        time: 0,\r\n        blend: 0,\r\n        intensity: 0.4,\r\n        lightAlpha: 1,\r\n        lightSize: 0.5,\r\n        scale: 1,\r\n        radius: 1,\r\n        chromatic: false,\r\n        zOrder: 512,\r\n        animated:\r\n            {\r\n                time:\r\n                    {\r\n                        active: true,\r\n                        speed: 0.0015,\r\n                        animType: \"move\",\r\n                    },\r\n            },\r\n    }];\r\n\r\nTokenMagic.addUpdateFiltersOnSelected(params);\r\n"}
{"_id":"IrU7oILyUlyEecJs","name":"Displacer","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/hole.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\nlet scale = 0.1 * target.actor.data.data.derived.mm.Size;\r\nlet gridsize = canvas.grid.grid.options.dimensions.size;\r\nlet gridscale = gridsize / 100;\r\n\r\nlet sequence = new Sequence()\r\n\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/DisplacerFire.ogg\")\r\n    .startTime(900)\r\n    .fadeInAudio(500)\r\n    .effect()\r\n    .file(\"jb2a.dancing_light.purplegreen\")\r\n    .tint(\"#2d0a3d\")\r\n    .endTime(3000)\r\n    .scale(0.40)\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .moveTowards(target)\r\n    .waitUntilFinished(200);\r\nsequence.effect()\r\n    .file(\"jb2a.fumes.steam.white\")\r\n    .atLocation(canvas.tokens.controlled[0], {offset: {x: (50 * gridscale), y: (-50 * gridscale)}})\r\n    .scale(scale)\r\n    .scaleOut(3, 6000)\r\n    .opacity(0.8);\r\nsequence.sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/DisplacerHit1.ogg\")\r\n    .repeats(6, 200)\r\n    .volume(0.6 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\nsequence.effect()\r\n    .file(\"jb2a.impact.blue\")\r\n    .tint(\"#2d0a3d\")\r\n    .scale(0.3)\r\n    .atLocation(target, {randomOffset: 0.9})\r\n    .repeats(6, 200)\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/DisplacerHit2.ogg\")\r\n    .delay(600)\r\n    .effect()\r\n    .file(\"jb2a.divine_smite.caster.blueyellow\")\r\n    .tint(\"#2d0a3d\")\r\n    .delay(300)\r\n    .scale(.9)\r\n    .atLocation(target)\r\n    .waitUntilFinished(-1000)\r\n\r\n    .play();\r\n"}
{"_id":"uOyi8zHzCseXGQSR","name":"Flamethrower","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/flamethrower-soldier.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"const args = arguments[0].args;\r\n\r\nconst findCenterOfTargetGroup = function (targetTokens) {\r\n    let total_x = 0;\r\n    let total_y = 0;\r\n    const numTargets = targetTokens.length;\r\n    targetTokens.forEach(t => {\r\n        let center = t.getCenter(t.position.x, t.position.y);\r\n        total_x = total_x + center.x;\r\n        total_y = total_y + center.y;\r\n    });\r\n    return {x: (total_x / numTargets), y: (total_y / numTargets)};\r\n};\r\n\r\nlet source, target;\r\nif (args && args.length == 2 && args[0] && args[1]) {\r\n    // Arguments passed in from caller -- default to using these\r\n    source = args[0];\r\n    target = findCenterOfTargetGroup(args[1]);\r\n} else {\r\n    // No arguments passed -- make sensible guesses\r\n    if (canvas.tokens.controlled.length > 0) {\r\n        source = canvas.tokens.controlled[0];\r\n    } else {\r\n        // Handle sanity check gracefully\r\n        ui.notifications.error(\"No source token selected, cannot play weapon FX\");\r\n        return;\r\n    }\r\n\r\n    const gameTargets = Array.from(game.user.targets);\r\n    if (!gameTargets || gameTargets.length == 0) {\r\n        // Handle sanity check gracefully\r\n        ui.notifications.error(\"No targets selected, cannot play weapon FX\");\r\n        return;\r\n    }\r\n    target = findCenterOfTargetGroup(gameTargets);\r\n}\r\n\r\nlet sequence = new Sequence()\r\n    .effect()\r\n    .file(\"jb2a.burning_hands.01.orange\")\r\n    .atLocation(source)\r\n    .rotateTowards(target)\r\n    .scale({x: 0.9, y: 1.2})\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/flamethrower_fire.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .play();\r\n"}
{"name":"Flechette Launcher","type":"script","author":"o4uIv78Hm1yumC2C","img":"modules/lancer-weapon-fx/icons/crowned-explosion.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"o4uIv78Hm1yumC2C":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.ZlM1qLZ3IUaxzhDW"}},"_id":"4znqR8pQvSs3KpZo","command":"let sequence = new Sequence()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/Flechette.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.explosion.04.blue\")\r\n    .playbackRate(2)\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .waitUntilFinished()\r\n    .effect()\r\n    .file(\"jb2a.impact.yellow\")\r\n    .scale(0.5)\r\n    .repeats(6, 20)\r\n    .atLocation(canvas.tokens.controlled[0], {randomOffset: 2.2})\r\n    .play();\r\n"}
{"_id":"5B4QaBx52NzRhdum","name":"Fuel Rod Gun","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/radiations.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.eHA0kJsiudxLiu9d"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/APR2_Load.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .waitUntilFinished()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/APR2_Fire.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.lasershot.green\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .stretchTo(target)\r\n    .scale(2.0)\r\n    .waitUntilFinished(-300)\r\n    .effect()\r\n    .file(\"jb2a.toll_the_dead.green.shockwave\")\r\n    .atLocation(target)\r\n    .scale(0.7)\r\n    .zIndex(1)\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/APR2_Impact.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .play();\r\n"}
{"_id":"uIr2lCpJWXbDaowG","name":"Hammer","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/hammer-drop.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.warhammer.melee.01.white.4\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Axe_swing.ogg\")\r\n        .delay(1300)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/HammerImpact.ogg\")\r\n        .delay(1350)\r\n        .volume(0.9 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.ground_crack.orange\")\r\n        .atLocation(target)\r\n        .scale(0.5)\r\n        .delay(1250)\r\n        .waitUntilFinished(-800);\r\n}\r\nsequence.play();\r\n"}
{"_id":"X6m0372eLE56NK6l","name":"HMG","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/machine-gun.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/AssaultCannonFire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.01.orange\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target, {randomOffset: 0.3})\r\n        .repeats(7, 50)\r\n        .scale(0.5)\r\n        .waitUntilFinished();\r\n}\r\n\r\nsequence.play();\r\n"}
{"name":"Impact Lance","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/6th_Level/Disintegrate/Disintegrate_01_Regular_Green01_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"_id":"gciDprfhVSDqYDPd","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator_Charge.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.disintegrate.green\")\r\n        .startTime(900)\r\n        .scale(.86)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .waitUntilFinished(-4000);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.3\")\r\n        .scale(1.0)\r\n        .atLocation(target)\r\n        .waitUntilFinished(-400);\r\n}\r\nsequence.play();\r\n"}
{"_id":"eyeOAl8lFp0w3Hfd","name":"Kraul Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/harpoon-chain.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.UnZmFVh9t9J5M8j7"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/AMR_Fire.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.bullet.Snipe.blue\")\r\n    .tint(\"#9d9595\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .stretchTo(target)\r\n    .waitUntilFinished(-1200)\r\n    .effect()\r\n    .file(\"jb2a.impact.orange.0\")\r\n    .atLocation(target)\r\n    .rotateTowards(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .rotate(230)\r\n    .center()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/AMR_Impact.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .play();\r\n"}
{"_id":"hWPrLPzlj6Y5RvC5","name":"Lasers","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Blue_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.Jyj2zOE26351Q1rQ"}},"command":"let target = Array.from(game.user.targets)[0];\r\nconst random = Sequencer.Helpers.random_float_between(200, 300);\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.lasershot.blue\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target, {randomOffset: 0.4})\r\n        .repeats(4, random);\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Laser_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(4, random);\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.2\")\r\n        .atLocation(target, {randomOffset: 0.4})\r\n        .scale(0.8)\r\n        .delay(250)\r\n        .repeats(4, random)\r\n        .waitUntilFinished(-1000);\r\n}\r\nsequence.play();\r\n"}
{"_id":"zf87PAIPccMpxnYn","name":"Latch Drone","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/LatchDrone.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"modules/lancer-weapon-fx/sprites/LatchDrone.png\")\r\n        .rotate(260)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotateTowards(target)\r\n        .moveTowards(target)\r\n        .moveSpeed(1200);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Mortar_Launch.ogg\")\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .waitUntilFinished()\r\n        .sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Stabilize.ogg\")\r\n        .volume(0.9 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .delay(200)\r\n        .effect()\r\n        .file(\"jb2a.healing_generic.400px.green\")\r\n        .atLocation(target)\r\n        .scale(0.5)\r\n        .delay(200);\r\n}\r\nsequence.play();\r\n"}
{"name":"LockOn","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/crosshair.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.y8FZ901QYM7PWOVY"}},"_id":"k5UDriYBR2pnAUjn","command":"let target = Array.from(game.user.targets)[0];\r\nlet scale = 0.25 * target.actor.system.derived.mm.Size;\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/LockOn.ogg\");\r\n    sequence.effect()\r\n        .file(\"jb2a.zoning.inward.square.loop.bluegreen.01.01\")\r\n        .atLocation(target)\r\n        .scale(scale);\r\n}\r\n\r\nsequence.play();\r\n"}
{"_id":"4M655uuaKwHfZJfZ","name":"Missile","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/missile-swarm.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.AdWXIJ6GMxHD8gfr"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Launch.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Travel.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"modules/animated-spell-effects/spell-effects/air/black_smoke_RAY_01.webm\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .scale({x: 1.0, y: .5})\r\n        .waitUntilFinished(-3700);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Impact.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.explosion.01.orange\")\r\n        .atLocation(target)\r\n        .scale(1.3)\r\n        .zIndex(1)\r\n        .waitUntilFinished(-1200);\r\n}\r\nsequence.play();\r\n"}
{"_id":"sSGstellhxzWUTXd","name":"Mortar","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/mortar.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"modules/animated-spell-effects-cartoon/spell-effects/cartoon/mix/fire_earth_explosion_SQUARE_02.webm\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotateTowards(target)\r\n        .scale(0.5);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Mortar_Launch.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.explosion.03.blueyellow\")\r\n        .atLocation(target, {randomOffset: true})\r\n        .repeats(3, 125)\r\n        .delay(900);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Mortar_Impact.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .delay(900);\r\n}\r\nsequence.play();\r\n"}
{"_id":"jHll38UQ9hHzwsf3","name":"Nanobot Whip","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/electric-whip.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\nlet scale = target.actor.system.derived.mm.Size;\r\nlet sequence = new Sequence();\r\n\r\nlet gridsize = canvas.grid.grid.options.dimensions.size;\r\nlet gridscale = gridsize / 100;\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.divine_smite.target.blueyellow\")\r\n        .scale(0.8)\r\n        .tint(\"#066605\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotateTowards(target)\r\n        .spriteOffset({x: -160 * gridscale, y: 90 * gridscale})\r\n        .rotate(90);\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladeswing.ogg\")\r\n\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladehit.ogg\")\r\n        .delay(300)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue\")\r\n        .scale(0.4)\r\n        .tint(\"#066605\")\r\n        .atLocation(target, {randomOffset: 1})\r\n        .repeats(4, 80)\r\n        .delay(700)\r\n        .waitUntilFinished(-1500);\r\n}\r\nsequence.play();\r\n"}
{"_id":"Aj3QspxsjcnNjfol","name":"Needle Beam","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Green_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.3w5iIuIb43kEheKy"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator_Charge.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .waitUntilFinished(-1200);\r\n    sequence.effect()\r\n        .file(\"jb2a.lasershot.green\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .repeats(2, 300);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Plasma_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(2, 300);\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.orange.0\")\r\n        .atLocation(target)\r\n        .rotateTowards(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotate(230)\r\n        .center()\r\n        .waitUntilFinished()\r\n        .tint(\"#1aff34\")\r\n        .scale(0.8)\r\n        .delay(400)\r\n        .waitUntilFinished(-1800);\r\n}\r\nsequence.play();\r\n"}
{"_id":"RmFiCRMoSOku7G5g","name":"Nexus","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/nano-bot.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.7nwy8pr1RWVbCAvc"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Nexus_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"modules/animated-spell-effects/spell-effects/energy/energy_throw_RAY_10.webm\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .scale({x: 1.0, y: .5})\r\n        .waitUntilFinished(-1300);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Nexus_Impact.ogg\")\r\n        .volume(0.4 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"modules/animated-spell-effects/spell-effects/energy/energy_explosion_CIRCLE_05.webm\")\r\n        .atLocation(target)\r\n        .scale(1.3)\r\n        .zIndex(1)\r\n        .waitUntilFinished(-1700);\r\n}\r\nsequence.play();\r\n"}
{"_id":"OSMfNiiu5XtzacAJ","name":"Pistol","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/pistol-gun.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\nconst random = Sequencer.Helpers.random_float_between(200, 500);\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/pistol_fire.ogg\")\r\n        .repeats(3, random)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.01.orange\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .scale(0.5)\r\n        .stretchTo(target, {randomOffset: 0.4})\r\n        .repeats(3, random)\r\n        .waitUntilFinished(-600);\r\n}\r\nsequence.play();\r\n"}
{"name":"Plasma Maul","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/hammer-drop.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"_id":"gBqPs99uLDUAroZu","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.warhammer.melee.01.white.4\")\r\n        .tint(\"#18f014\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Axe_swing.ogg\")\r\n        .delay(1300)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Axe_Hit.ogg\")\r\n        .delay(1550)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.3\")\r\n        .scale(1.2)\r\n        .tint(\"#18f014\")\r\n        .atLocation(target)\r\n        .delay(1550)\r\n        .waitUntilFinished(-1000);\r\n}\r\nsequence.play();\r\n"}
{"_id":"noDQfz2lYaqIc1ii","name":"Plasma Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Green_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.3w5iIuIb43kEheKy"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.lasershot.green\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target, {randomOffset: 0.4})\r\n        .repeats(3, 300);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Plasma_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(3, 300);\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.004.blue\")\r\n        .atLocation(target, {randomOffset: 0.4})\r\n        .tint(\"#1aff34\")\r\n        .scale(0.6)\r\n        .repeats(3, 300)\r\n        .delay(400)\r\n        .waitUntilFinished(-1800);\r\n}\r\nsequence.play();\r\n"}
{"_id":"ui1a07lCGBOk4Rp7","name":"Plasma Talons","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/claw-slashes.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n\r\n    sequence.effect()\r\n        .file(\"jb2a.claws.400px.red\")\r\n        .tint(\"#720d87\")\r\n        .scale(0.8)\r\n        .atLocation(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Melee.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .repeats(2, 200);\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.2\")\r\n        .scale(1.5)\r\n        .tint(\"#c91af9\")\r\n        .atLocation(target)\r\n        .delay(600)\r\n        .waitUntilFinished(-1000);\r\n}\r\nsequence.play();\r\n"}
{"_id":"e5XwWrHsiRKrgh7S","name":"Plasma Thrower","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/lightning-flame.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.uB7pKp9YJ1yS5WvO"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n    .effect()\r\n    .file(\"jb2a.breath_weapons02.burst.line.fire.orange.01\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .rotateTowards(target)\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/flamethrower_fire.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .play();\r\n"}
{"_id":"UL0licrIIu44WXnO","name":"Plasma Torch","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/laserburn.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.uB7pKp9YJ1yS5WvO"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence()\r\n    .effect()\r\n    .file(\"jb2a.fire_jet.orange\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .stretchTo(target)\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/flamethrower_fire.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .play();\r\n"}
{"_id":"oGArtZBtIRBcRHCh","name":"Power Knuckle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/thor-fist.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.4fnFwDhaacJOeXEn"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.unarmed_strike.physical.02.blue\")\r\n        .scale(0.9)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/knuckleswing.ogg\")\r\n        .delay(300)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/knucklehit.ogg\")\r\n        .delay(600)\r\n        .volume(0.8 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .waitUntilFinished(-100);\r\n}\r\nsequence.play();\r\n"}
{"_id":"LxQMeItXellYRt3b","name":"PPC","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/6th_Level/Chain_Lightning/ChainLightning_01_Regular_Blue_Primary_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.MYvW9vDvnlzPxRLQ"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/PPC2.ogg\")\r\n        .delay(400)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.chain_lightning.primary.blue\")\r\n        .scale(0.7)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target);\r\n}\r\nsequence.play();\r\n"}
{"name":"Preload LancerWeaponFX","type":"script","author":"AZ3wQQG0mIDlDIfD","img":"modules/lancer-weapon-fx/icons/loadfx.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"AZ3wQQG0mIDlDIfD":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.J3aMSzCKUaEbcPVJ"}},"_id":"7DO055aDh1QmVHby","command":"await Sequencer.Preloader.preloadForClients([\"jb2a.arrow.physical.blue\",\r\n    \"jb2a.breath_weapons02.burst.line.fire.orange.01\",\r\n    \"jb2a.bolt.physical.orange\",\r\n    \"jb2a.bullet.01.orange\",\r\n    \"jb2a.bullet.Snipe.blue\",\r\n    \"jb2a.burning_hands.01.orange\",\r\n    \"jb2a.chain_lightning.primary.blue\",\r\n    \"jb2a.claws.400px.red\",\r\n    \"jb2a.dancing_light.purplegreen\",\r\n    \"jb2a.disintegrate.green\",\r\n    \"jb2a.divine_smite.caster.blueyellow\",\r\n    \"jb2a.divine_smite.target.blueyellow\",\r\n    \"jb2a.eldritch_blast.purple\",\r\n    \"jb2a.energy_beam.normal.bluepink.02\",\r\n    \"jb2a.energy_strands.complete.blue.01\",\r\n    \"jb2a.energy_strands.range.multiple.purple.01.30ft\",\r\n    \"jb2a.explosion.01.orange\",\r\n    \"jb2a.explosion.02.blue\",\r\n    \"jb2a.explosion.03.blueyellow\",\r\n    \"jb2a.explosion.04.blue\",\r\n    \"jb2a.fireball.beam.orange\",\r\n    \"jb2a.fireball.explosion.orange\",\r\n    \"jb2a.fire_jet.orange\",\r\n    \"jb2a.fumes.steam.white\",\r\n    \"jb2a.greataxe.melee.standard.white\",\r\n    \"jb2a.healing_generic.400px.green\",\r\n    \"jb2a.impact.004.blue\",\r\n    \"jb2a.impact.blue\",\r\n    \"jb2a.impact.ground_crack.orange\",\r\n    \"jb2a.impact.orange.0\",\r\n    \"jb2a.impact.orange.3\",\r\n    \"jb2a.impact.yellow\",\r\n    \"jb2a.lasershot.blue\",\r\n    \"jb2a.lasershot.green\",\r\n    \"jb2a.lasersword.melee.blue\",\r\n    \"jb2a.lightning_ball.blue\",\r\n    \"jb2a.lightning_bolt.narrow.blue\",\r\n    \"jb2a.magic_missile.purple\",\r\n    \"jb2a.spear.melee.01.white.2\",\r\n    \"jb2a.static_electricity.02.blue\",\r\n    \"jb2a.sword.melee.01.white\",\r\n    \"jb2a.template_circle.vortex.loop.blue\",\r\n    \"jb2a.toll_the_dead.green.shockwave\",\r\n    \"jb2a.unarmed_strike\",\r\n    \"jb2a.warhammer.melee.01.white.4\",\r\n    \"jb2a.zoning.inward.square.loop.bluegreen.01.01\",\r\n    \"modules/lancer-weapon-fx/icons/LatchDrone.png\",\r\n    \"modules/animated-spell-effects/spell-effects/air/black_smoke_RAY_01.webm\",\r\n    \"modules/animated-spell-effects/spell-effects/energy/energy_throw_RAY_10.webm\",\r\n    \"modules/animated-spell-effects/spell-effects/energy/energy_explosion_CIRCLE_05.webm\",\r\n], true);\r\n"}
{"name":"Railgun","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/supersonic-bullet.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.e2KnuysIXP5IhXFy"}},"_id":"iOD860W9KokfR3Hy","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator_Charge.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .waitUntilFinished(-500);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/AMR_Fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.Snipe.blue\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/AMR_Impact.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.orange.0\")\r\n        .atLocation(target)\r\n        .rotateTowards(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .rotate(230)\r\n        .center()\r\n        .waitUntilFinished();\r\n}\r\nsequence.play();\r\n"}
{"name":"Retort Loop","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Generic/Energy/EnergyBeam_02_Regular_BluePink_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.MYvW9vDvnlzPxRLQ"}},"_id":"NbTm6IW88EKyM6sN","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/RetortLoop.ogg\")\r\n        .volume(0.8 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.energy_beam.normal.bluepink.02\")\r\n        .scale(0.7)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target)\r\n        .delay(200);\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue\")\r\n        .scale(0.3)\r\n        .atLocation(target, {randomOffset: 0.9})\r\n        .repeats(8, 300)\r\n        .delay(500);\r\n}\r\nsequence.play();\r\n"}
{"_id":"NMU9syMKa0dTsINf","name":"Shotgun","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/shotgun-rounds.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/shotgun_cycle.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/shotgun_fire.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .delay(500);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/shotgun_impact.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .delay(800);\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.01.orange\")\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .scale(0.9)\r\n        .stretchTo(target, {randomOffset: 0.7})\r\n        .repeats(6)\r\n        .delay(500)\r\n        .waitUntilFinished(-100);\r\n}\r\nsequence.play();\r\n"}
{"name":"Slag Cannon","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/rock.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"_id":"OAs6mALoTynun3lM","command":"let target = Array.from(game.user.targets)[0];\r\nlet scale = 0.1 * target.actor.system.derived.mm.Size;\r\nlet sequence = new Sequence()\r\n\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/CPR_Fire.ogg\")\r\n    .effect()\r\n    .file(\"jb2a.energy_strands.complete.blue.01\")\r\n    .tint(\"#ceb673\")\r\n    .endTime(1500)\r\n    .scale(0.10)\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .moveTowards(target)\r\n    .waitUntilFinished(200);\r\nsequence.sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/DisplacerHit1.ogg\")\r\n    .repeats(3, 100)\r\n    .volume(0.6 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\nsequence.effect()\r\n    .file(\"jb2a.impact.blue\")\r\n    .tint(\"#ceb673\")\r\n    .scale(0.3)\r\n    .atLocation(target, {randomOffset: 0.9})\r\n    .repeats(3, 100)\r\n\r\n    .play();\r\n"}
{"_id":"77szM2o5ThaLsJax","name":"Stabilize","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Green_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.Ma4E3RObKZN56959"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let sequence = new Sequence()\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/Stabilize.ogg\")\r\n    .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n    .effect()\r\n    .file(\"jb2a.healing_generic.400px.green\")\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .play();\r\n"}
{"name":"Tachyon Lance","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Bullet_03_Regular_Blue_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"_id":"BkYGErIuWCVcF4rS","command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator_Charge.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .waitUntilFinished();\r\n\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.orange.0\")\r\n        .atLocation(target, {randomOffset: 0.7})\r\n        .rotateTowards(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .repeats(3, 100)\r\n        .rotate(230)\r\n        .center();\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Annihilator.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"))\r\n        .waitUntilFinished(-400);\r\n}\r\nsequence.play();\r\n"}
{"_id":"LixHY6HTrY7D3b7S","name":"Thermal Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/JB2A_DnD5e/Library/3rd_Level/Fireball/FireballBeam_01_Orange_Thumb.webp","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Thermal_Rifle_Fire.ogg\")\r\n        .delay(400)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.fireball.beam.orange\")\r\n        .scale(1.25)\r\n        .startTime(1500)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Thermal_Rifle_Hit.ogg\")\r\n        .delay(700)\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.orange.3\")\r\n        .atLocation(target)\r\n        .delay(700)\r\n        .waitUntilFinished();\r\n}\r\nsequence.play();\r\n"}
{"_id":"zsccsSD1tOOqRc5Q","name":"Torch","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/axe-swing.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.greataxe.melee.standard.white\")\r\n        .tint(\"#c91af9\")\r\n        .scale(0.8)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Axe_swing.ogg\")\r\n        .delay(1300)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/Axe_Hit.ogg\")\r\n        .delay(1550)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.blue.3\")\r\n        .scale(1.2)\r\n        .tint(\"#c91af9\")\r\n        .atLocation(target)\r\n        .delay(1550)\r\n        .waitUntilFinished(-1000);\r\n}\r\nsequence.play();\r\n"}
{"_id":"6vtYP47LXaX5POYB","name":"Veil Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/laser-blast.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.kPcFC1RlHpFrQfoV"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.bullet.Snipe.blue\")\r\n        .filter(\"ColorMatrix\", {hue: 60})\r\n        .filter(\"Glow\", {distance: 3})\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .stretchTo(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/veil_rifle.ogg\")\r\n        .volume(0.5 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n}\r\nsequence.play();\r\n"}
{"_id":"CqlCKrYyJCYdmLks","name":"War Pike","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/barbed-spear.png","scope":"global","folder":null,"sort":0,"permission":{"default":0,"V1p3l3q12ZqIraMP":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.4fnFwDhaacJOeXEn"}},"command":"let target = Array.from(game.user.targets)[0];\r\n\r\nlet sequence = new Sequence();\r\n\r\nfor (let target of Array.from(game.user.targets)) {\r\n    sequence.effect()\r\n        .file(\"jb2a.spear.melee.01.white.2\")\r\n        .filter(\"Glow\", {color: 0x8D918D})\r\n        .scale(0.8)\r\n        .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n        .moveTowards(target);\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladeswing.ogg\")\r\n        .delay(1000)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.sound()\r\n        .file(\"modules/lancer-weapon-fx/soundfx/bladehit.ogg\")\r\n        .delay(1150)\r\n        .volume(0.7 * game.settings.get(\"lancer-weapon-fx\", \"volume\"));\r\n    sequence.effect()\r\n        .file(\"jb2a.impact.orange.3\")\r\n        .scale(0.8)\r\n        .atLocation(target)\r\n        .delay(1100)\r\n        .waitUntilFinished();\r\n}\r\nsequence.play();\r\n"}
{"_id":"jGNjJXWRQMh7jPhA","name":"Warp Rifle","type":"script","author":"V1p3l3q12ZqIraMP","img":"modules/lancer-weapon-fx/icons/hole.png","scope":"global","folder":null,"sort":0,"permission":{"V1p3l3q12ZqIraMP":3},"flags":{"core":{"sourceId":"Macro.7HdAyp8kUFGxXkAG"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}},"command":"let target = Array.from(game.user.targets)[0];\r\nlet scale = 0.1 * target.actor.system.derived.mm.Size;\r\nlet sequence = new Sequence()\r\n\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/DisplacerFire.ogg\")\r\n    .startTime(900)\r\n    .fadeInAudio(500)\r\n    .effect()\r\n    .file(\"jb2a.energy_strands.range.multiple.purple.01\")\r\n    .scale(0.40)\r\n    .atLocation(canvas.tokens.controlled[0] ?? game.combat?.current?.tokenId)\r\n    .stretchTo(target)\r\n    .waitUntilFinished(-600)\r\n    .sound()\r\n    .file(\"modules/lancer-weapon-fx/soundfx/DisplacerHit2.ogg\")\r\n    .delay(300)\r\n    .effect()\r\n    .file(\"jb2a.divine_smite.caster.blueyellow\")\r\n    .scale(.9)\r\n    .tint(\"#9523e1\")\r\n    .atLocation(target)\r\n    .waitUntilFinished(-1000)\r\n\r\n    .play();\r\n"}
